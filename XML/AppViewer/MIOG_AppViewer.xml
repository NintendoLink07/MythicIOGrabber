<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\..\FrameXML\UI.xsd">
    <Frame name="MIOG_AppViewer" mixin="AppViewer" virtual="true">
        <Frames>
			<Frame parentKey="Border" inherits="DialogBorderDarkTemplate" useParentLevel="true"/>

            <Frame parentKey="SortButtons" mixin="SimplifiedSortingMixin, AnchorSystemMixin">
                <Size y="24" />
                        
                <KeyValues>
                    <KeyValue key="spacing" value="3" type="number" />
                </KeyValues>

                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.Border.Bg" relativePoint="TOPLEFT" x="3"/>
                    <Anchor point="TOPRIGHT" relativeKey="$parent.Border.Bg" relativePoint="TOPRIGHT" x="-3"/>
                </Anchors>

                <Frames>
                    <Button parentKey="Role" name="role" parentArray="sortButtons" inherits="MIOG_HeaderSortButtonTemplate" justifyH="LEFT" text="#1">
                        <Size y="22" />
                        
                        <KeyValues>
                            <KeyValue key="widthUnits" value="4" type="number" />
                            <KeyValue key="widthPerc" value="50" type="number" />
                        </KeyValues>

                        <Scripts>
                            <OnLoad method="OnLoad" />
                        </Scripts>
                    </Button>
                    
                    <Button parentKey="Primary" name="primary" parentArray="sortButtons" inherits="MIOG_HeaderSortButtonTemplate" justifyH="LEFT" text="#2">
                        <Size y="22" />
                        
                        <KeyValues>
                            <KeyValue key="widthUnits" value="1" type="number" />
                            <KeyValue key="widthPerc" value="12.5" type="number" />
                        </KeyValues>

                        <Scripts>
                            <OnLoad method="OnLoad" />
                        </Scripts>
                    </Button>
                    
                    <Button parentKey="Secondary" name="secondary" parentArray="sortButtons" inherits="MIOG_HeaderSortButtonTemplate" justifyH="LEFT" text="#3">
                        <Size y="22" />
                        
                        <KeyValues>
                            <KeyValue key="widthUnits" value="1" type="number" />
                            <KeyValue key="widthPerc" value="12.5" type="number" />
                        </KeyValues>

                        <Scripts>
                            <OnLoad method="OnLoad" />
                        </Scripts>
                    </Button>
                    
                    <Button parentKey="ItemLevel" name="itemLevel" parentArray="sortButtons" inherits="MIOG_HeaderSortButtonTemplate" justifyH="LEFT" text="#4">
                        <Size y="22" />
                        
                        <KeyValues>
                            <KeyValue key="widthUnits" value="2" type="number" />
                            <KeyValue key="widthPerc" value="25" type="number" />
                        </KeyValues>

                        <Scripts>
                            <OnLoad method="OnLoad" />
                        </Scripts>
                    </Button>
                </Frames>

                <Scripts>
                    <OnLoad>
                        SimplifiedSortingMixin.OnLoad(self)
                        AnchorSystemMixin.OnLoad(self)
                    </OnLoad>
                </Scripts>
            </Frame>

            <Frame parentKey="ActivityBar" inherits="InsetFrameTemplate3">
                <Size y="112" />

                <Anchors>
                    <Anchor point="BOTTOMLEFT" relativeKey="$parent.Border.Bg" relativePoint="BOTTOMLEFT" x="3"/>
                    <Anchor point="BOTTOMRIGHT" relativeKey="$parent.Border.Bg" relativePoint="BOTTOMRIGHT" x="-3"/>
                </Anchors>

                <Frames>
                    <Button parentKey="Back" inherits="UIPanelButtonTemplate" text="BACK">
                        <Size x="60" y="20" />

                        <Anchors>
                            <Anchor point="BOTTOMLEFT" x="2" y="2"/>
                        </Anchors>

                        <Scripts>
                            <OnClick>
                                PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
                                LFGListFrame_SetActivePanel(LFGListFrame, LFGListFrame.CategorySelection);
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button parentKey="Edit" inherits="UIPanelButtonTemplate" text="EDIT">
                        <Size x="60" y="20" />

                        <Anchors>
                            <Anchor point="LEFT" relativeKey="$parent.Back" relativePoint="RIGHT" x="2"/>
                        </Anchors>

                        <Scripts>
                            <OnClick>
                                PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
                                LFGListEntryCreation_SetEditMode(LFGListFrame.EntryCreation, true)
                                LFGListFrame_SetActivePanel(LFGListFrame, LFGListFrame.EntryCreation)
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button parentKey="Delist" inherits="UIPanelButtonTemplate" text="GROUP_FINDER_DELIST">
                        <Size x="80" y="20" />

                        <Anchors>
                            <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
                        </Anchors> 

                        <Scripts>
                            <OnClick>
                                PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON)
                                C_LFGList.RemoveListing()
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button parentKey="RefreshButton" inherits="RefreshButtonTemplate">
                        <Size x="32" y="32" />
                        <KeyValues>
                            <KeyValue key="iconAtlas" value="UI-RefreshButton" type="string"/>
                        </KeyValues>
                        
                        <Anchors>
                            <Anchor point="TOPRIGHT" relativeKey="$parent.BorderTopRight" relativePoint="TOPRIGHT" x="2" y="1"/>
                        </Anchors>

                        <Scripts>
                            <OnClick>
                                local appViewer = self:GetParent():GetParent()
                                
                                appViewer:RefreshApplicantList()
                            </OnClick>
                        </Scripts>
                    </Button>
                </Frames>

                <Layers>
                    <Layer level="BACKGROUND" textureSubLevel="-7">
                        <Texture parentKey="Background" vertTile="true" horizTile="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.BorderTopLeft" relativePoint="TOPLEFT" x="2" y="-2"/>
                                <Anchor point="BOTTOMRIGHT" relativeKey="$parent.BorderBottomRight" relativePoint="BOTTOMRIGHT" x="-2" y="2"/>
                            </Anchors>
                        </Texture>
                    </Layer>

                    <Layer level="OVERLAY">
                        <FontString parentKey="Name" font="GameFontHighlight" justifyH="LEFT" justifyV="MIDDLE" outline="NORMAL">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.BorderTopLeft" relativePoint="BOTTOMRIGHT"/>
                            </Anchors>

                            <Scripts>
                                <OnEnter>
                                    local activeEntry = C_LFGList.GetActiveEntryInfo()

                                    if(activeEntry and activeEntry.privateGroup) then
                                        GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
                                        GameTooltip:SetText("This group is private")
                                        GameTooltip:Show()

                                    end
                                </OnEnter>
                                <OnLeave function="GameTooltip_Hide" />
                            </Scripts>
                        </FontString>

                        <FontString parentKey="Title" font="GameFontHighlightLarge" justifyH="LEFT" justifyV="MIDDLE" outline="NORMAL" wordwrap="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.Name" relativePoint="BOTTOMLEFT" y="-4"/>
                            </Anchors>

                            <Scripts>
                                <OnEnter>
                                    local activeEntry = C_LFGList.GetActiveEntryInfo()

                                    if(activeEntry and activeEntry.privateGroup) then
                                        GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
                                        GameTooltip:SetText("This group is private")
                                        GameTooltip:Show()

                                    end
                                </OnEnter>
                                <OnLeave function="GameTooltip_Hide" />
                            </Scripts>
                        </FontString>

                        <FontString parentKey="Description" font="GameFontHighlightSmall" justifyH="LEFT" justifyV="MIDDLE" outline="NORMAL">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.Title" relativePoint="BOTTOMLEFT" y="-4"/>
                            </Anchors>
                        </FontString>

                        <FontString parentKey="QueueTime" font="GameFontHighlight" justifyH="LEFT" justifyV="CENTER" outline="NORMAL">
                            <Anchors>
                                <Anchor point="RIGHT" relativeKey="$parent.RefreshButton" relativePoint="LEFT"/>
                            </Anchors>
                        </FontString>

                        <FontString parentKey="Primary" font="GameFontHighlight" justifyH="LEFT" justifyV="CENTER" outline="NORMAL">
                            <Anchors>
                                <Anchor point="TOPRIGHT" relativeKey="$parent.RefreshButton" relativePoint="BOTTOMRIGHT" x="-8"/>
                            </Anchors>
                        </FontString>

                        <FontString parentKey="Secondary" font="GameFontHighlight" justifyH="LEFT" justifyV="CENTER" outline="NORMAL">
                            <Anchors>
                                <Anchor point="TOPRIGHT" relativeKey="$parent.Primary" relativePoint="BOTTOMRIGHT"/>
                            </Anchors>
                        </FontString>

                        <Texture parentKey="VoiceChat" atlas="voicechat-icon-mic">
                            <Size x="20" y="20" />

                            <Anchors>
                                <Anchor point="BOTTOMRIGHT" relativeKey="$parent.Delist" relativePoint="TOPRIGHT" x="-2" y="4"/>
                            </Anchors>

                            <Scripts>
                                <OnEnter>
                                    GameTooltip:SetOwner(self, "ANCHOR_RIGHT")

                                    if(self:IsDesaturated()) then
                                        GameTooltip:SetText("Voice chat disabled")

                                    else
                                        GameTooltip:SetText("Voice chat enabled")

                                    end

                                    GameTooltip:Show()
                                </OnEnter>
                                <OnLeave function="GameTooltip_Hide" />
                                <OnLoad>
                                    self:SetDesaturated()

                                </OnLoad>
                            </Scripts>
                        </Texture>
                        
                        <Texture parentKey="Faction">
                            <Size x="20" y="20" />

                            <Anchors>
                                <Anchor point="RIGHT" relativeKey="$parent.VoiceChat" relativePoint="LEFT"/>
                            </Anchors>

                            <Scripts>
                                <OnEnter>
                                    local activeEntry = C_LFGList.GetActiveEntryInfo()

                                    if(activeEntry) then
                                        GameTooltip:SetOwner(self, "ANCHOR_RIGHT")

                                        if(activeEntry.isCrossFactionListing) then
                                            GameTooltip:SetText("Cross faction is enabled")

                                        elseif(activeEntry.isCrossFactionListing == false) then
                                            GameTooltip:SetText("Cross faction is disabled")

                                        elseif(activeEntry.isCrossFactionListing == nil) then
                                            GameTooltip:SetText("Cross faction is not available")

                                        end

                                        GameTooltip:Show()
                                    end
                                </OnEnter>
                                <OnLeave function="GameTooltip_Hide" />
                            </Scripts>
                        </Texture>
                    </Layer>
                </Layers>
            </Frame>
        
            <Frame parentKey="ScrollBox" inherits="WowScrollBoxList">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.SortButtons" relativePoint="BOTTOMLEFT"/>
                    <Anchor point="BOTTOMRIGHT" relativeKey="$parent.ActivityBar" relativePoint="TOPRIGHT"/>
                </Anchors>
            </Frame>
        </Frames>

        <Scripts>
            <OnLoad method="OnLoad" />
            <OnShow method="OnShow" />
        </Scripts>
    </Frame>
</Ui>